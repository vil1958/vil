#### Файловые системы для USB накопителей и карт памяти
https://habr.com/ru/company/kingston_technology/blog/382059/
FAT32 (ограничение на размер 4 294 967 295 байт)
Существующий максимально возможный размер файла для тома FAT32 составляет
4 294 967 295 байт, то есть примерно 4 гигабайта, а это накладывает некоторые ограничения на использование флеш-накопителей.

**Привет, Гиктаймс!** Большинство пользователей не задумываются о том, в какой файловой системе у них отформатирована флешка или карта памяти. И в самом деле, зачем вникать в такие тонкости — проще доверить форматирование фотоаппарату или согласиться с выбором десктопа. Под катом напомню о природе FAT32, NTFS и exFAT и буду разбираться как влияет (если влияет вовсе) файловая система на производительность накопителя.

Про файловые системы приведу краткую историческую справку в порядке появления ФС на свет.  
  
### Файловая система NTFS — прочитать подробнее в [Wikipedia](https://ru.wikipedia.org/wiki/NTFS)
 
Изначально стандартная файловая система для операционных систем Microsoft Windows NT. Представлена в июле 1993 года, вместе с операционной системой Windows NT 3.1. NTFS была призвана заменить файловую систему FAT и повысить производительность дисковой подсистемы.  
  

### Файловая система FAT32 — прочитать подробнее в [Wikipedia](https://ru.wikipedia.org/wiki/FAT32)

  
Она появилась чуть позже и стала наследницей широко используемой ФС FAT. Первой операционной системой с поддержкой FAT32 стала Windows 95 OSR2, которая появилась в августе 1996 года. Разработка новой файловой системы была вызвана необходимостью преодолеть ограничения на размер тома в FAT16, но при этом полностью сохранить возможность использования старого программного кода.  
Существующий максимально возможный размер файла для тома FAT32 составляет 4 294 967 295 байт, то есть примерно 4 гигабайта, а это накладывает некоторые ограничения на использование флеш-накопителей.  
  
### Файловая система exFAT — прочитать подробнее в [Wikipedia](https://ru.wikipedia.org/wiki/ExFAT)

Самая «свежая» файловая система из списка. Ее особенностью является то, что она разрабатывала специально для накопителей на флэш-памяти. Датой появления стал ноябрь 2006 года, момент выхода операционной системы Windows Embedded CE 6.0. Некоторые источники называют exFAT — FAT64. Самое важное новшество по сравнению с FAT32 — уменьшение количества перезаписей информации в один и тот же сектор (использование wear leveling), что позволяет продлить срок службы флэш-устройств.  
  
Собственно к чему ведется разговор? Как я уже сказал во вступлении многие не задумываются, какую ФС выбрать, оставляя значение по умолчанию, а еще большее количество людей даже не знают — как отформатирована карточка памяти или флешка.  
Выбор небольшой, но есть всегда, к примеру карта памяти Kingston SDXC на 256 гигабайт имеет всего две опции — exFAT и NTFS, причем дефолтной для Windows является exFAT, да и фотоаппарат Canon 6D при форматировании карточки в нем выбирает именно эту систему. Выбор в общем-то разумный и оправданный. Но вот флэш-накопитель Kingston DataTraveler Locker+ G3 32 Gb будет отформатирован операционной системой Windows 8.1 по умолчанию в FAT32, что неминуемо приведет к вопросам со стороны пользователя, как только ему потребуется перенести огромный образ DVD диска или BDRemux какого-нибудь фильма. Кроме того, теория говорит о разнице в производительности между файловыми системами.  
Проверю это несложное предположение на практике, используя уже упомянутый накопитель Kingston DataTraveler Locker+ G3 32 Gb.

Если на чтение у всех файловых систем результат примерно одинаковый, то на запись разница между exFAT и NTFS составила около 17 процентов. FAT32 занимает положение посерединке, проигрывая exFAT больше, чем выигрывает у NTFS.    

#### TeraCopy
  
Для оценки самой что ни на есть реальной производительности я записывал на флешку BDRemux фильма The Hobbit. Battle Of Five Armies (размер файла 28 851 025 килобайт) и фиксировал время, за которое фильм скопируется на накопитель.

Разница по времени копирования между NTFS и exFAT составила около 45 секунд, в переводе в относительные значения — около 2,5%, небольшая, но все же разница. FAT32 по очевидным причинам в этом тесте участия не принимала.  
  
### Финальные размышления

Побуду немного капитаном Очевидность, и скажу, что самый разумный выбор для форматирования флэш-устройств — файловая система exFAT — она специально разрабатывалась для использования с флэш-памятью, она же наиболее производительная. Не поленитесь проверить свою флешку и сделать правильный выбор.  
  
Спасибо за внимание, оставайтесь с Kingston на Geektimes.ru!

=============================================
https://recovery-software.ru/blog/refs-file-system-and-data-recovery.html

https://recovery-software.ru/blog/how-to-fix-the-raw-flash-drive.html
#### Как восстановить RAW флешκу?
## Κοнвертирοвание RAW дисκа при пοмοщи κοманднοй стрοκи

Этοт спοсοб таκже, κаκ и предыдущий стοит испοльзοвать тοльκο в тοм случае, если на вашем наκοпителе не былο ниκаκих важных данных, пοсκοльκу, κаκ и в предыдущем спοсοбе **вся инфοрмация на дисκе будет уничтοжена**
Вся суть в тοм, чтο инοгда при фοрматирοвании дисκа через прοвοдниκ Windows вοзниκает οшибκа:
«Windows не может отформатировать этот диск»
В этοм случае для фοрматирοвания наκοпителя лучше всегο вοспοльзοваться утилитοй **diskpart** дοступ κ κοтοрοй οсуществляется через **κοмандную стрοκу** или среду Windows PowerShell.

Для тοгο, чтοбы вοспοльзοваться этим метοдοм следует:

1.  Щелκните **правοй κнοпκοй мыши** на κнοпκе «**Пусκ**» и выберите «**Выпοлнить**» (Вы таκже мοжете вοспοльзοваться κοмбинацией κлавиш « **Win+R**»).
2. В οтκрывшемся οκне наберите «**cmd**» и нажмите « **Enter**»
3. Перед вами οтκрοется οκнο κοманднοй стрοκи.Введите κοманду «**diskpart**» и снοва нажмите «**Enter**»
4. Пοсле успешнοгο запусκа утилиты «**diskpart**» пοοчереднο ввοдим следующие κοманды (пοсле κаждοй нажимая «**Enter**» для ее выпοлнения):   
   `list disk` – эта κοманда οтοбражает все дисκи, пοдκлюченные κ вашему κοмпьютеру; `select disk n` – эта κοманда выбирает нужный вам дисκ для дальнейшей рабοты. **n** следует  заменить нοмерοм дисκа, κοтοрый сοдержит οшибκу RAW;   
   `clean` – эта κοманда пοлнοстью οчищает выбранный ранее наκοпитель (уничтοжая при этοм файлοвую систему и все данные);   
   `create partition primary` – эта κοманда сοздаст нοвый раздел на вашем дисκе;   
   `active` – сделает ваш раздел аκтивным;  
    `list partition` – для οтοбражения всех разделοв на вашем дисκе;  
    `select partition 1` – эта κοманда выберет тοльκο чтο сοзданный раздел для дальнейшей рабοты;  
    `format override fs=exfat quick label=UsbExFat`
    `format override fs=ntfs quick label=UsbkNtfs`
    `format override fs=fat32 quick label=UsbFat32` - – эта κοманда οтфοрматирует ваш раздел в EXFAT (вам не οбязательнο уκазывать тип файлοвοй системы, таκ κаκ diskpart автοматичесκи οтфοрматирует ваш дисκ в NTFS). Для выхοда из утилиты **diskpart** прοстο введите κοманду «**exit**» и нажмите «**Enter**»

### [Запрещенные имена файлов и папок в Windows](https://vellisa.ru/forbidden-characters-filenames-windows)
#forbidden_characters_filenames

Многие пользователи сталкивались с тем, что при попытке создать или сохранить файл они видели сообщение о том, что это «недопустимое имя файла», если там присутствуют некоторые символы или было введено неподходящее имя.

Дело в том, что в операционной системе Windows имеются запрещенные имена файлов. Не все имена файлов и папок разрешены, потому что существуют недопустимые символы в имени файла или папки.
## Недопустимые имена файлов Windows

В операционной системе Windows запрещены имена не только «CON», но и «NUL», «AUX» некоторые другие, которые зарезервированы для имен устройств. Верхний и нижний регистр символов в имени не имеют значения, поэтому «con» или «CON» одинаково не разрешены в качестве обозначения файла или папки.

Не используйте подобные имена с расширением имени файла, потому что в этом случае расширение не учитывается. Операционная система воспринимает файлы «CON» и «con.txt» как одно и тоже.

Список недопустимых имен в Windows:

- CON, PRN, AUX, NUL, COM0, COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT0, LPT1, LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, LPT9.

Не называйте папки и файлы такими именами, чтобы избежать конфликтов с различными устройствами.

## Запрещенные символы в имени файла или папки

Помимо собственно имени файла, в операционной системе Windows имеются запрещенные символы в имени файла или папки. Кроме того, нельзя забывать, что пользователи могут открывать и просматривать файлы в других операционных системах (macOS, Linux, Android), поэтому лучше избегать некоторых символов в именах файлов.

В ОС Windows в имени файла запрещено использование следующих символов в файловой системе NTFS (таблица):

|   |   |
|---|---|
|<|знак меньше, чем|
|>|знак больше, чем|
|:|двоеточие|
|«|двойные кавычки|
|/|косая черта (прямой слеш)|
|\|обратная косая черта (обратный слеш)|
|\||вертикальная черта|
|?|вопросительный знак|
|*|звездочка|

В файловой системе FAT имеются следующие запрещенные символы в имени файла (таблица):

|   |   |
|---|---|
|.|точка|
|«|двойные кавычки|
|/|косая черта (прямой слеш)|
|\|обратная косая черта (обратный слеш)|
|[|левая квадратная скобка|
|]|правая квадратная скобка|
|:|двоеточие|
|;|точка с запятой|
|\||вертикальная черта|
|=|знак равенства|
|,|запятая|

Помимо вышеперечисленных примеров лучше не использовать в именах файлов и папок следующие символы из-за ограничений Интернета или других файловых систем (таблица):

|   |   |
|---|---|
|#|решетка|
|%|процент|
|&|амперсанд|
||пробел|
|+|плюс|
|@|символ «собака»|

Имена файлов не могут заканчиваться пробелом или точкой.

Читайте также: [Как посмотреть расширение файла в Windows](https://vellisa.ru/show-file-extensions-windows)

## Как создать папку с недопустимым именем

Если вы хотите создать папку с названием, запрещенным в Windows, вы можете использовать обходной путь с командной строкой. Создавать подобные папки не рекомендуется из-за возможного конфликта устройств на компьютере.

Для примера, мы создадим папку с именем «CON» на локальном диске «C:».

Выполните следующие действия:

1. В поле поиска Windows введите «cmd».
2. Запустите командную строку от имени администратора.
3. В окне интерпретатора командной строки введите предложенную команду, а потом нажмите на клавишу «Enter»:
`md "\\.\C:\CON"`

Подобная папка на компьютере довольно бесполезна, потому что эту папку невозможно открыть в Windows 8.1 и Windows 10.
Кроме того, удалить папку с компьютера не получится простым способом, с помощью щелчка правой кнопкой мыши и выполнения команды контекстного меню «Удалить».

Другая ситуация наблюдается в последних версиях Windows 11. Операционная система не позволяет создать папку с именем «CON» и другими неподдерживаемыми именами, но у вас получится удалить этот каталог, созданный в командной строке, обычным способом (кроме папки с именем «NUL»). Вы можете открыть подобную папку и вложенные в нее файлы.

## Как удалить папку с недопустимым именем файла — 3 способа

На жестком диске (HDD) или на твердотельном накопителе (SSD) вашего компьютера находится неудаляемая папка. Независимо от того, создали ли вы сами папку или ее создал кто-то другой, вы захотите от нее избавиться. Простые методы решения этой проблемы не подойдут.

Используйте три предложенных метода.

1 способ.

Вызовите командную строку, как описано выше в статье и выполните команду:
`rmdir \\.\C:\CON`

та команда работает, если обрабатываемая папка была пустой. При необходимости измените команду, если местоположение и имя удаляемого каталога отличаются от этих.

Если в папке «CON» есть файлы, сначала очистите этот каталог через консоль командой:
`del \\.\C:\CON /q`
Затем удалите ненужную папку:
`rmdir \\.\C:\CON`

3 способ.

Создание и удаление неподдерживаемых файлов и папок возможно с помощью «живого» DVD-диска или USB-накопителя с Linux. Вам нужно использовать загрузочные Live CD, Live DVD или Live USB носители с операционной системой Linux. Также для этих целей подходят антивирусные спасательные диски, потому что они созданы на основе дистрибутивов Linux.

Загрузитесь с Live USB на ПК. С помощью файлового менеджера, установленного на подобном диске, можно получить доступ к системе Windows. Linux нужен только драйвер для доступа на запись к файловой системе Windows. Удалите или переименуйте файл или папку с недопустимым именем.